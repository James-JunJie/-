# 加密

## 对称加密

加密和解密使用的秘钥是相同的。

问题：如果秘钥被截获，那么传输的信息不安全。

##非对称加密

非对称加密：**加密和解密的秘钥不相同。分为公钥和私钥。**

* 使用公钥加密信息，只有私钥解密。

* 使用私钥加密的信息，只有公钥才能解密。

问题：一对公私要，容易被黑客截获。

两对公私钥，进行消息传输。

![image-20210908151645509](https://ljjblog.oss-cn-beijing.aliyuncs.com/img/image-20210908151645509.png)

## 数字证书

如何将不对称加密的公钥给对方呢？

* 放在公网的地址上
* 建立连接，传给对方

##CA和签名算法

CA：发布一个证书

证书：**服务器的公钥** + **证书所有者** + **发布机构** + **证书有效期**。

###发布机构 CA保证证书防篡改

服务端请求颁发CA证书，发送CA证书+ 签名。

服务端通过CA公钥解密签名--->Hash值    和 CA进行Hash计算的Hash值 是否一样。

1. CA机构拥有自己的一对**公钥和私钥**
2. Hash计算证书明文信息-->Hash值
3. **私钥加签Hash值，得到**数字签名

签名算法：对信息进行Hash计算，得到Value。它是不可逆的，即无法通过value得到原来信息。

##HTTPS的工作模式

> 对称加密效率高，而非对称加密效率低。

**混合加密**：对称加密 + 非对称加密

非对称加密：用来**加密传输** **对称加密的公钥**。

对称加密：双方大数据量的通信都是对称加密。

步骤：

* 客户端**请求**通过明文传输一个随机数
* 服务端**响应**通过明文传输一个随机数+**证书**
* 客户端通**过ca认证机构，证书中得到服务端公钥**。
* 使用**服务端公钥发送一个随机数**，服务端和客户端通过三个随机数计算出**对称加密的公钥**。
* 使用对称加密秘钥加密数据，进行数据传输。

![image-20210908154328376](https://ljjblog.oss-cn-beijing.aliyuncs.com/img/image-20210908154328376.png)









https://zhuanlan.zhihu.com/p/164901138



